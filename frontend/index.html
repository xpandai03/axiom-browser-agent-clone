<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Agent - Automate repetitive tasks on the web</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <main class="app-container">
        <!-- LEFT PANE: Chat-like interface -->
        <aside class="left-pane">
            <div class="left-pane-inner">
                <!-- Header -->
                <div class="pane-header">
                    <h1 class="brand-title">Browser Agent</h1>
                    <p class="brand-subtitle">Automate repetitive tasks on the web</p>
                </div>

                <!-- Suggestion Cards Grid -->
                <div class="suggestion-cards">
                    <button class="suggestion-card" data-workflow="greenhouse">
                        <span class="card-title">Apply to jobs</span>
                        <span class="card-subtitle">on Greenhouse automatically</span>
                    </button>
                    <button class="suggestion-card" data-workflow="extract">
                        <span class="card-title">Extract job listings</span>
                        <span class="card-subtitle">from company career pages</span>
                    </button>
                    <button class="suggestion-card" data-workflow="click">
                        <span class="card-title">Navigate and click</span>
                        <span class="card-subtitle">through job postings</span>
                    </button>
                    <button class="suggestion-card" data-workflow="test">
                        <span class="card-title">Quick test</span>
                        <span class="card-subtitle">screenshot any website</span>
                    </button>
                </div>

                <!-- Chat Messages Area (future: assistant messages) -->
                <div class="chat-messages" id="chat-messages"></div>

                <!-- Input Area -->
                <div class="input-area">
                    <textarea
                        id="instructions"
                        placeholder="Describe your automation task..."
                        rows="3"
                    ></textarea>
                    <div class="input-controls">
                        <button class="attach-btn" id="attach-btn" title="Attach file">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                            </svg>
                        </button>
                        <button class="send-btn" id="send-btn" title="Run workflow">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m5 12 7-7 7 7"/>
                                <path d="M12 19V5"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Collapsible User Data Panel -->
                <details class="user-data-panel">
                    <summary>
                        <span class="summary-text">User Profile Data</span>
                        <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m6 9 6 6 6-6"/>
                        </svg>
                    </summary>
                    <div class="user-data-fields">
                        <div class="field-row">
                            <input type="text" id="user-first-name" placeholder="First Name" class="user-field">
                            <input type="text" id="user-last-name" placeholder="Last Name" class="user-field">
                        </div>
                        <input type="email" id="user-email" placeholder="Email" class="user-field">
                        <input type="tel" id="user-phone" placeholder="Phone" class="user-field">
                        <input type="text" id="user-location" placeholder="Location (City, State)" class="user-field">
                        <input type="url" id="user-linkedin" placeholder="LinkedIn URL" class="user-field">
                    </div>
                </details>

                <!-- Hidden file input for attach button -->
                <input type="file" id="resume" accept=".txt,.md,.doc,.docx,.pdf" style="display: none;">

                <!-- Hidden job description (optional, can be expanded later) -->
                <input type="hidden" id="job-description" value="">
            </div>
        </aside>

        <!-- RIGHT PANE: Live Automation Timeline -->
        <section class="right-pane">
            <div class="timeline-container" id="timeline">
                <!-- Empty State -->
                <div class="empty-state" id="empty-state">
                    <div class="empty-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="18" x="3" y="3" rx="2"/>
                            <path d="M7 7h10"/>
                            <path d="M7 12h10"/>
                            <path d="M7 17h10"/>
                        </svg>
                    </div>
                    <h2 class="empty-title">Automation Timeline</h2>
                    <p class="empty-text">Select a workflow card or describe your task to begin.<br>Each step will appear here as it executes.</p>
                </div>

                <!-- Timeline cards will be rendered here dynamically -->
            </div>
        </section>
    </main>

    <!-- Screenshot Viewer Modal -->
    <div id="screenshot-viewer" class="screenshot-viewer">
        <div class="viewer-backdrop" onclick="closeScreenshotViewer()"></div>
        <div class="viewer-content">
            <button id="close-viewer" class="close-btn" onclick="closeScreenshotViewer()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"/>
                    <path d="m6 6 12 12"/>
                </svg>
            </button>
            <img id="viewer-image" src="" alt="Screenshot">
            <div id="viewer-caption" class="viewer-caption"></div>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="error" class="error-toast"></div>

    <script src="/static/main.js"></script>
</body>
</html>
